<html lang="en-GB">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="An Air horn. Probably the best air horn web app there is.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="canonical" href="https://iamkdev.github.io/add2home/">
<title>The Air Horner</title>
<link rel="manifest" href="manifest.json">
<meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="Air Horner">
<link rel="icon" sizes="192x192" href="/images/touch/Airhorner_192.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Air Horner">
<link rel="apple-touch-icon" href="/images/touch/Airhorner_192.png">
<meta name="msapplication-TileImage" content="/images/touch/Airhorner_144.png">
<meta name="msapplication-TileColor" content="#2196F3">
<meta name="theme-color" content="#2196F3">
</head>
<body>
  <div>
    <div>
      <h1>Add to HomeScreen</h1>
    </div>
    <script>
          if('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js', { scope: '/add2home/' })
              .then(function(registration) {
                    console.log("Service Worker Registered");
              });

            navigator.serviceWorker.ready.then(function(registration) {
               console.log("Service Worker Ready");
            });
          }
    </script>
    <script type="text/javascript">
      var deferredPrompt;

    window.addEventListener('beforeinstallprompt', function(e) {
    console.log('beforeinstallprompt Event fired');
    e.preventDefault();

    // Stash the event so it can be triggered later.
    deferredPrompt = e;

    return false;
    });

    btnSave.addEventListener('click', function() {
    if(deferredPrompt !== undefined) {
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then(function(choiceResult) {

        console.log(choiceResult.outcome);

        if(choiceResult.outcome == 'dismissed') {
          console.log('User cancelled home screen install');
        }
        else {
          console.log('User added to home screen');
        }
        deferredPrompt = null;
      });
    }
    });
    </script>
 </body>
</html>
